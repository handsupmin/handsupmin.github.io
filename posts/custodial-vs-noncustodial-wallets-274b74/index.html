<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>커스토디얼 vs 논커스토디얼 월렛 비교 | HandsLog</title>
<meta name=keywords content="cryptocurrency,wallet,security,blockchain"><meta name=description content="개요
프라이빗키 관리 방식에 따라 암호화폐 월렛은 커스토디얼(custodial) 과 논커스토디얼(noncustodial) 로 구분됨
각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 초보자도 이해할 수 있게 정리하면서 실무자가 바로 적용할 수 있는 체크리스트까지 제시함

핵심 개념


커스토디얼 월렛
제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조
로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨


논커스토디얼 월렛
사용자가 프라이빗키를 직접 보유·관리하는 구조
브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임


핵심 차이 한 줄 정리
키의 소유·통제 주체가 제3자인가 사용자 본인인가의 차이"><meta name=author content><link rel=canonical href=https://handsupmin.github.io/posts/custodial-vs-noncustodial-wallets-274b74/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://handsupmin.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://handsupmin.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://handsupmin.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://handsupmin.github.io/apple-touch-icon.png><link rel=mask-icon href=https://handsupmin.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://handsupmin.github.io/posts/custodial-vs-noncustodial-wallets-274b74/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NKJRT1NC1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6NKJRT1NC1")</script><meta name=google-adsense-account content="ca-pub-6022353980017733"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6022353980017733" crossorigin=anonymous></script><meta property="og:url" content="https://handsupmin.github.io/posts/custodial-vs-noncustodial-wallets-274b74/"><meta property="og:site_name" content="HandsLog"><meta property="og:title" content="커스토디얼 vs 논커스토디얼 월렛 비교"><meta property="og:description" content="개요 프라이빗키 관리 방식에 따라 암호화폐 월렛은 커스토디얼(custodial) 과 논커스토디얼(noncustodial) 로 구분됨 각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 초보자도 이해할 수 있게 정리하면서 실무자가 바로 적용할 수 있는 체크리스트까지 제시함
핵심 개념 커스토디얼 월렛 제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조 로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨
논커스토디얼 월렛 사용자가 프라이빗키를 직접 보유·관리하는 구조 브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임
핵심 차이 한 줄 정리 키의 소유·통제 주체가 제3자인가 사용자 본인인가의 차이"><meta property="og:locale" content="ko-kr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-23T13:09:26+00:00"><meta property="article:modified_time" content="2025-09-23T13:09:26+00:00"><meta property="article:tag" content="Cryptocurrency"><meta property="article:tag" content="Wallet"><meta property="article:tag" content="Security"><meta property="article:tag" content="Blockchain"><meta name=twitter:card content="summary"><meta name=twitter:title content="커스토디얼 vs 논커스토디얼 월렛 비교"><meta name=twitter:description content="개요
프라이빗키 관리 방식에 따라 암호화폐 월렛은 커스토디얼(custodial) 과 논커스토디얼(noncustodial) 로 구분됨
각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 초보자도 이해할 수 있게 정리하면서 실무자가 바로 적용할 수 있는 체크리스트까지 제시함

핵심 개념


커스토디얼 월렛
제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조
로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨


논커스토디얼 월렛
사용자가 프라이빗키를 직접 보유·관리하는 구조
브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임


핵심 차이 한 줄 정리
키의 소유·통제 주체가 제3자인가 사용자 본인인가의 차이"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://handsupmin.github.io/posts/"},{"@type":"ListItem","position":2,"name":"커스토디얼 vs 논커스토디얼 월렛 비교","item":"https://handsupmin.github.io/posts/custodial-vs-noncustodial-wallets-274b74/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"커스토디얼 vs 논커스토디얼 월렛 비교","name":"커스토디얼 vs 논커스토디얼 월렛 비교","description":"개요 프라이빗키 관리 방식에 따라 암호화폐 월렛은 커스토디얼(custodial) 과 논커스토디얼(noncustodial) 로 구분됨 각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 초보자도 이해할 수 있게 정리하면서 실무자가 바로 적용할 수 있는 체크리스트까지 제시함\n핵심 개념 커스토디얼 월렛 제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조 로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨\n논커스토디얼 월렛 사용자가 프라이빗키를 직접 보유·관리하는 구조 브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임\n핵심 차이 한 줄 정리 키의 소유·통제 주체가 제3자인가 사용자 본인인가의 차이\n","keywords":["cryptocurrency","wallet","security","blockchain"],"articleBody":"개요 프라이빗키 관리 방식에 따라 암호화폐 월렛은 커스토디얼(custodial) 과 논커스토디얼(noncustodial) 로 구분됨 각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 초보자도 이해할 수 있게 정리하면서 실무자가 바로 적용할 수 있는 체크리스트까지 제시함\n핵심 개념 커스토디얼 월렛 제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조 로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨\n논커스토디얼 월렛 사용자가 프라이빗키를 직접 보유·관리하는 구조 브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임\n핵심 차이 한 줄 정리 키의 소유·통제 주체가 제3자인가 사용자 본인인가의 차이\n모델별 동작 원리와 구성 커스토디얼 키 보관 중앙화된 키 보관소와 접근제어 체계를 운용 보통 핫월렛 과 콜드월렛 을 분리해 즉시성 vs 보관 안정성을 균형 있게 설계함 운영 통제 권한 분리, 변경 이력 추적, 승인 워크플로, 이상 징후 모니터링을 포함 유저 경험 계정 비밀번호·2FA 등 웹서비스 UX에 가깝고 분실 시 고객지원으로 복구 가능성이 있음 논커스토디얼 키 생성·저장·복구를 사용자 단말 또는 전용 기기에서 수행 하드웨어 지갑은 기기 내 보안영역에서 서명 연산을 수행해 키를 외부로 노출하지 않음 시드 문구(BIP‑39) 와 HD 지갑(BIP‑32, BIP‑44) 로 여러 주소를 파생해 사용함 분실·도난·손상에 대비한 백업·복구 절차가 필수임 하이브리드 접근 멀티시그 N개 중 M개 서명이 있어야 지출 가능 운영자 간 책임 분산과 단일 키 손실 리스크 완화에 효과적 키 분할과 복구 Shamir Secret Sharing 은 백업·복구에 적합하나 서명 자체는 수행하지 않음 임계값 서명(MPC/TSS) 여러 파티가 키 조각을 재조합 없이 공동 서명 단일 실패 지점 제거와 유연한 권한 정책이 장점 보안·규제·운영 관점 비교 구분 커스토디얼 논커스토디얼 키 소유 서비스 사업자 사용자 복구 용이성 계정 기반 복구 지원 가능 사용자가 책임, 백업 실패 시 복구 불가 보안 초점 내부자 위협·핫월렛 침해·운영 취약점 피싱·악성코드·물리 분실·백업 실패 컴플라이언스 관할에 따라 수탁 라이선스·KYC/AML 등 요구 가능 개인 사용은 상대적으로 자유, 조직은 회계·규정 준수 정책 필요 확장성/운영 기업 통제·감사 로그·승인 워크플로에 유리 사용자 자율성 최상, 표준화된 기업 통제는 구현 난이도 존재 일반 용도 거래소·커스터디 업체·핀테크 개인 보관·DAO 금고·개별 팀 지갑 위협 모델 수립 가이드 가치와 빈도 소액·빈번 결제는 접근성·자동화 우선, 대액·장기 보관은 보존·격리가 우선 공격면 피싱 링크·악성 확장프로그램·사기 승인 서명, 내부자 오남용, 인프라 취약점, 물리적 분실 복구 요구 사람 교체·기기 손상·지역 재해 등 현실 시나리오에서 얼마나 빨리 복구 가능한지 평가 감사 가능성 로그 불변성·승인 이력·역활분리와 규정 준수 증빙 가능성 점검 커스토디얼 선택 체크리스트 운영 보안 핫·콜드 분리, 다중인증, 권한 분리, 변경관리, 침해사고 대응 계획 보유 여부 키 관리 체계 HSM 또는 동급 보안 모듈 사용, 키 생성·보관·회전 절차 문서화, 접근 통제 로그 유지 감사·인증 SOC 2 Type II, ISO/IEC 27001, 취약점 스캐닝·모의침투 주기 운영 여부 재무·보험 보험 범위와 면책 조항을 명확히 공개하는지, 준비금·준법 체계 확인 규제 준수 관할 내 라이선스·KYC/AML 의무 이행, 제재 대응 정책 보유 논커스토디얼 선택 체크리스트 백업·복구 시드 문구 오프라인 보관, 금고·내화 금속 플레이트 등 물리 보안, 복구 리허설 정기 수행 기기 보안 하드웨어 지갑 사용, 펌웨어 서명 검증, 기기 PIN·패스프레이즈 사용, 분실 시 스스로 wipe 가능한지 확인 트랜잭션 안전 서명 전 도메인 분리 정보를 기기 화면에서 직접 확인, 승인 범위·스팸 토큰·허가 영속성 점검 멀티시그·MPC 병용 단일 키 실패 지점 제거, 역할 기반 승인 정책 적용 자동화 요구 스케줄 결제·트리거 송금 등 자동화는 지갑 권한 최소화와 일회성 권한 부여로 제한 운영 베스트 프랙티스 핵심 원칙 최소 권한, 강한 인증, 분리 보관, 반복 검증 지출 정책 금액 구간별 다른 승인 경로 적용, 시간지연 타임락과 알림으로 오탐·오남용 방지 주소 화이트리스트 높은 금액은 사전 등록 주소로만 송금 모니터링 대기열 이상, 실패율 급증, 신규 승인 요청 급증, 지출 한도 임계 접근 알림 키 수명주기 관리 생성·배포·사용·보관·회수·폐기 전 과정 문서화와 정기 점검 사고 대응 유출 의심 즉시 키 회전, 멀티시그 참여자 교체, 브리지·거래소 연락망 업데이트, 법무·준법 협업 라인 확보 시나리오별 권장 아키텍처 개인 사용자 데일리 소액은 모바일 지갑 사용 장기 보관·대액은 하드웨어 지갑과 오프라인 백업 병행 승인 내역 정기 점검과 피싱 훈련 연습 권장\n소규모 팀/스타트업 운영비 지출용 커스토디얼 핫월렛 + 멀티시그 콜드 보관 회계·승인 로그를 공유 드라이브가 아닌 전용 감사 시스템에 적재\n기업·DAO 금고 MPC 기반 금고 또는 다중 하드웨어 지갑 멀티시그 역할 기반 접근제어와 오프보딩 절차, 비상 시나리오의 대체 서명자 지정\n자주 하는 실수와 교정 Shamir 분할 = 안전한 서명이라고 오해 Shamir는 복구용 비밀 분할 기법이고 서명은 수행하지 않음 서명 분산은 MPC/TSS 를 사용함 하드웨어 지갑이면 무조건 안전 펌웨어 진위 검증, 공급망 위협, 화면 검증 습관 없으면 위험이 남음 보험이 있으니 안심 보험은 조건과 면책이 많아 모든 손실을 보장하지 않음 범위·상한·예외를 반드시 확인해야 함 커스토디얼은 모두 동일 보안 수준·감사 성숙도·규제 준수·재무 건전성에 큰 차이가 있음 최소 보안 기준 가이드 개인 하드웨어 지갑 1대 이상, 시드 문구 오프라인 백업 2곳, 패스프레이즈 병행, 피싱 훈련 팀 멀티시그 M‑of‑N, 변경 승인 워크플로, 월간 복구 리허설, 화이트리스트 송금 기업 MPC 금고 또는 멀티시그 금고, HSM 또는 동급 보안 모듈, SOC 2 Type II·침투테스트, 사고 대응 플레이북 운영 간단 권장 흐름 1 단계 자산 규모 분류와 위협 모델 정의 2 단계 논커스토디얼·커스토디얼·하이브리드 중 적합 아키텍처 선정 3 단계 백업·복구 문서화와 정기 리허설 시행 4 단계 멀티시그 또는 MPC로 단일 실패 지점 제거 5 단계 지출 정책·화이트리스트·모니터링·사고 대응 체계 운영\n결론 프라이빗키 소유·통제가 보안과 편의의 출발점임 대액·장기 자산은 논커스토디얼과 멀티시그·MPC 조합이 유리하고 업무 자동화·고객 지원이 중요한 경우 커스토디얼이 효율적일 수 있음 모든 선택은 위협 모델·규정 준수·복구 요구를 기준으로 문서화하고 정기적으로 검증해야 함\n참고자료 BIP‑32 계층적 결정성 지갑 https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki BIP‑39 니모닉 문구 https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki BIP‑44 파생 경로 https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki Torus Key Infrastructure 개요 https://docs.tor.us/key-infrastructure/overview NIST SP 800‑57 Part 1 키 관리 권고 https://csrc.nist.gov/publications/detail/sp/800-57-part-1/rev-5/final FIPS 140‑3 암호 모듈 보안 요구사항 https://csrc.nist.gov/publications/detail/fips/140/3/final AICPA SOC 2 안내 https://www.aicpa-cima.com/resources/article/what-is-soc-2 ","wordCount":"851","inLanguage":"en","datePublished":"2025-09-23T13:09:26.448Z","dateModified":"2025-09-23T13:09:26.448Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://handsupmin.github.io/posts/custodial-vs-noncustodial-wallets-274b74/"},"publisher":{"@type":"Organization","name":"HandsLog","logo":{"@type":"ImageObject","url":"https://handsupmin.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://handsupmin.github.io/ accesskey=h title="HandsLog (Alt + H)">HandsLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://handsupmin.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://handsupmin.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://handsupmin.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://handsupmin.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">커스토디얼 vs 논커스토디얼 월렛 비교</h1><div class=post-meta><span title='2025-09-23 13:09:26.448 +0000 UTC'>September 23, 2025</span></div></header><div class=post-content><h3 id=개요>개요<a hidden class=anchor aria-hidden=true href=#개요>#</a></h3><p>프라이빗키 관리 방식에 따라 암호화폐 월렛은 <strong>커스토디얼(custodial)</strong> 과 <strong>논커스토디얼(noncustodial)</strong> 로 구분됨
각 방식의 차이와 선택 기준, 보안·운영 리스크와 대응 방안을 <strong>초보자도 이해할 수 있게</strong> 정리하면서 <strong>실무자가 바로 적용할 수 있는 체크리스트</strong>까지 제시함</p><hr><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><ul><li><p><strong>커스토디얼 월렛</strong>
제3자 서비스가 사용자의 프라이빗키를 보관하고 서명을 대행하는 구조
로그인·출금 등은 서비스 인증 절차를 거쳐 처리됨</p></li><li><p><strong>논커스토디얼 월렛</strong>
사용자가 프라이빗키를 직접 보유·관리하는 구조
브라우저 확장 지갑·모바일 앱 지갑·하드웨어 지갑이 대표적 사례임</p></li><li><p><strong>핵심 차이 한 줄 정리</strong>
키의 <strong>소유·통제 주체</strong>가 제3자인가 사용자 본인인가의 차이</p></li></ul><hr><h3 id=모델별-동작-원리와-구성>모델별 동작 원리와 구성<a hidden class=anchor aria-hidden=true href=#모델별-동작-원리와-구성>#</a></h3><h4 id=커스토디얼>커스토디얼<a hidden class=anchor aria-hidden=true href=#커스토디얼>#</a></h4><ul><li><strong>키 보관</strong>
중앙화된 키 보관소와 접근제어 체계를 운용
보통 <strong>핫월렛</strong> 과 <strong>콜드월렛</strong> 을 분리해 즉시성 vs 보관 안정성을 균형 있게 설계함</li><li><strong>운영 통제</strong>
권한 분리, 변경 이력 추적, 승인 워크플로, 이상 징후 모니터링을 포함</li><li><strong>유저 경험</strong>
계정 비밀번호·2FA 등 웹서비스 UX에 가깝고 분실 시 고객지원으로 복구 가능성이 있음</li></ul><h4 id=논커스토디얼>논커스토디얼<a hidden class=anchor aria-hidden=true href=#논커스토디얼>#</a></h4><ul><li><strong>키 생성·저장·복구</strong>를 사용자 단말 또는 전용 기기에서 수행</li><li><strong>하드웨어 지갑</strong>은 기기 내 보안영역에서 서명 연산을 수행해 키를 외부로 노출하지 않음</li><li><strong>시드 문구(BIP‑39)</strong> 와 <strong>HD 지갑(BIP‑32, BIP‑44)</strong> 로 여러 주소를 파생해 사용함</li><li>분실·도난·손상에 대비한 <strong>백업·복구 절차</strong>가 필수임</li></ul><h4 id=하이브리드-접근>하이브리드 접근<a hidden class=anchor aria-hidden=true href=#하이브리드-접근>#</a></h4><ul><li><strong>멀티시그</strong>
N개 중 M개 서명이 있어야 지출 가능
운영자 간 책임 분산과 단일 키 손실 리스크 완화에 효과적</li><li><strong>키 분할과 복구</strong>
<strong>Shamir Secret Sharing</strong> 은 백업·복구에 적합하나 <strong>서명 자체는 수행하지 않음</strong></li><li><strong>임계값 서명(MPC/TSS)</strong>
여러 파티가 키 조각을 <strong>재조합 없이</strong> 공동 서명
단일 실패 지점 제거와 유연한 권한 정책이 장점</li></ul><hr><h3 id=보안규제운영-관점-비교>보안·규제·운영 관점 비교<a hidden class=anchor aria-hidden=true href=#보안규제운영-관점-비교>#</a></h3><table><thead><tr><th>구분</th><th>커스토디얼</th><th>논커스토디얼</th></tr></thead><tbody><tr><td>키 소유</td><td>서비스 사업자</td><td>사용자</td></tr><tr><td>복구 용이성</td><td>계정 기반 복구 지원 가능</td><td>사용자가 책임, 백업 실패 시 복구 불가</td></tr><tr><td>보안 초점</td><td>내부자 위협·핫월렛 침해·운영 취약점</td><td>피싱·악성코드·물리 분실·백업 실패</td></tr><tr><td>컴플라이언스</td><td>관할에 따라 수탁 라이선스·KYC/AML 등 요구 가능</td><td>개인 사용은 상대적으로 자유, 조직은 회계·규정 준수 정책 필요</td></tr><tr><td>확장성/운영</td><td>기업 통제·감사 로그·승인 워크플로에 유리</td><td>사용자 자율성 최상, 표준화된 기업 통제는 구현 난이도 존재</td></tr><tr><td>일반 용도</td><td>거래소·커스터디 업체·핀테크</td><td>개인 보관·DAO 금고·개별 팀 지갑</td></tr></tbody></table><hr><h3 id=위협-모델-수립-가이드>위협 모델 수립 가이드<a hidden class=anchor aria-hidden=true href=#위협-모델-수립-가이드>#</a></h3><ul><li><strong>가치와 빈도</strong>
소액·빈번 결제는 접근성·자동화 우선, 대액·장기 보관은 보존·격리가 우선</li><li><strong>공격면</strong>
피싱 링크·악성 확장프로그램·사기 승인 서명, 내부자 오남용, 인프라 취약점, 물리적 분실</li><li><strong>복구 요구</strong>
사람 교체·기기 손상·지역 재해 등 <strong>현실 시나리오</strong>에서 얼마나 빨리 복구 가능한지 평가</li><li><strong>감사 가능성</strong>
로그 불변성·승인 이력·역활분리와 규정 준수 증빙 가능성 점검</li></ul><hr><h3 id=커스토디얼-선택-체크리스트>커스토디얼 선택 체크리스트<a hidden class=anchor aria-hidden=true href=#커스토디얼-선택-체크리스트>#</a></h3><ul><li><strong>운영 보안</strong>
핫·콜드 분리, 다중인증, 권한 분리, 변경관리, 침해사고 대응 계획 보유 여부</li><li><strong>키 관리 체계</strong>
<strong>HSM</strong> 또는 동급 보안 모듈 사용, 키 생성·보관·회전 절차 문서화, 접근 통제 로그 유지</li><li><strong>감사·인증</strong>
<strong>SOC 2 Type II</strong>, <strong>ISO/IEC 27001</strong>, 취약점 스캐닝·모의침투 주기 운영 여부</li><li><strong>재무·보험</strong>
보험 범위와 면책 조항을 명확히 공개하는지, 준비금·준법 체계 확인</li><li><strong>규제 준수</strong>
관할 내 라이선스·KYC/AML 의무 이행, 제재 대응 정책 보유</li></ul><hr><h3 id=논커스토디얼-선택-체크리스트>논커스토디얼 선택 체크리스트<a hidden class=anchor aria-hidden=true href=#논커스토디얼-선택-체크리스트>#</a></h3><ul><li><strong>백업·복구</strong>
시드 문구 오프라인 보관, 금고·내화 금속 플레이트 등 물리 보안, 복구 리허설 정기 수행</li><li><strong>기기 보안</strong>
하드웨어 지갑 사용, 펌웨어 서명 검증, 기기 PIN·패스프레이즈 사용, 분실 시 스스로 wipe 가능한지 확인</li><li><strong>트랜잭션 안전</strong>
서명 전 <strong>도메인 분리</strong> 정보를 기기 화면에서 직접 확인, 승인 범위·스팸 토큰·허가 영속성 점검</li><li><strong>멀티시그·MPC 병용</strong>
단일 키 실패 지점 제거, 역할 기반 승인 정책 적용</li><li><strong>자동화 요구</strong>
스케줄 결제·트리거 송금 등 자동화는 지갑 권한 최소화와 일회성 권한 부여로 제한</li></ul><hr><h3 id=운영-베스트-프랙티스>운영 베스트 프랙티스<a hidden class=anchor aria-hidden=true href=#운영-베스트-프랙티스>#</a></h3><ul><li><strong>핵심 원칙</strong>
최소 권한, 강한 인증, 분리 보관, 반복 검증</li><li><strong>지출 정책</strong>
금액 구간별 다른 승인 경로 적용, 시간지연 타임락과 알림으로 오탐·오남용 방지</li><li><strong>주소 화이트리스트</strong>
높은 금액은 사전 등록 주소로만 송금</li><li><strong>모니터링</strong>
대기열 이상, 실패율 급증, 신규 승인 요청 급증, 지출 한도 임계 접근 알림</li><li><strong>키 수명주기 관리</strong>
생성·배포·사용·보관·회수·폐기 전 과정 문서화와 정기 점검</li><li><strong>사고 대응</strong>
유출 의심 즉시 키 회전, 멀티시그 참여자 교체, 브리지·거래소 연락망 업데이트, 법무·준법 협업 라인 확보</li></ul><hr><h3 id=시나리오별-권장-아키텍처>시나리오별 권장 아키텍처<a hidden class=anchor aria-hidden=true href=#시나리오별-권장-아키텍처>#</a></h3><ul><li><p><strong>개인 사용자</strong>
데일리 소액은 모바일 지갑 사용
장기 보관·대액은 하드웨어 지갑과 오프라인 백업 병행
승인 내역 정기 점검과 피싱 훈련 연습 권장</p></li><li><p><strong>소규모 팀/스타트업</strong>
운영비 지출용 커스토디얼 핫월렛 + 멀티시그 콜드 보관
회계·승인 로그를 공유 드라이브가 아닌 전용 감사 시스템에 적재</p></li><li><p><strong>기업·DAO 금고</strong>
MPC 기반 금고 또는 다중 하드웨어 지갑 멀티시그
역할 기반 접근제어와 오프보딩 절차, 비상 시나리오의 대체 서명자 지정</p></li></ul><hr><h3 id=자주-하는-실수와-교정>자주 하는 실수와 교정<a hidden class=anchor aria-hidden=true href=#자주-하는-실수와-교정>#</a></h3><ul><li><strong>Shamir 분할 = 안전한 서명이라고 오해</strong>
Shamir는 <strong>복구용</strong> 비밀 분할 기법이고 서명은 수행하지 않음
서명 분산은 <strong>MPC/TSS</strong> 를 사용함</li><li><strong>하드웨어 지갑이면 무조건 안전</strong>
펌웨어 진위 검증, 공급망 위협, 화면 검증 습관 없으면 위험이 남음</li><li><strong>보험이 있으니 안심</strong>
보험은 조건과 면책이 많아 모든 손실을 보장하지 않음
범위·상한·예외를 반드시 확인해야 함</li><li><strong>커스토디얼은 모두 동일</strong>
보안 수준·감사 성숙도·규제 준수·재무 건전성에 큰 차이가 있음</li></ul><hr><h3 id=최소-보안-기준-가이드>최소 보안 기준 가이드<a hidden class=anchor aria-hidden=true href=#최소-보안-기준-가이드>#</a></h3><ul><li><strong>개인</strong>
하드웨어 지갑 1대 이상, 시드 문구 오프라인 백업 2곳, 패스프레이즈 병행, 피싱 훈련</li><li><strong>팀</strong>
멀티시그 M‑of‑N, 변경 승인 워크플로, 월간 복구 리허설, 화이트리스트 송금</li><li><strong>기업</strong>
MPC 금고 또는 멀티시그 금고, HSM 또는 동급 보안 모듈, SOC 2 Type II·침투테스트, 사고 대응 플레이북 운영</li></ul><hr><h3 id=간단-권장-흐름>간단 권장 흐름<a hidden class=anchor aria-hidden=true href=#간단-권장-흐름>#</a></h3><p>1 단계 자산 규모 분류와 위협 모델 정의
2 단계 논커스토디얼·커스토디얼·하이브리드 중 적합 아키텍처 선정
3 단계 백업·복구 문서화와 정기 리허설 시행
4 단계 멀티시그 또는 MPC로 단일 실패 지점 제거
5 단계 지출 정책·화이트리스트·모니터링·사고 대응 체계 운영</p><hr><h3 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h3><p>프라이빗키 <strong>소유·통제</strong>가 보안과 편의의 출발점임
대액·장기 자산은 논커스토디얼과 멀티시그·MPC 조합이 유리하고 업무 자동화·고객 지원이 중요한 경우 커스토디얼이 효율적일 수 있음
모든 선택은 <strong>위협 모델·규정 준수·복구 요구</strong>를 기준으로 문서화하고 정기적으로 검증해야 함</p><hr><h3 id=참고자료>참고자료<a hidden class=anchor aria-hidden=true href=#참고자료>#</a></h3><ul><li>BIP‑32 계층적 결정성 지갑
<a href=https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki>https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki</a></li><li>BIP‑39 니모닉 문구
<a href=https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki>https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki</a></li><li>BIP‑44 파생 경로
<a href=https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki>https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki</a></li><li>Torus Key Infrastructure 개요
<a href=https://docs.tor.us/key-infrastructure/overview>https://docs.tor.us/key-infrastructure/overview</a></li><li>NIST SP 800‑57 Part 1 키 관리 권고
<a href=https://csrc.nist.gov/publications/detail/sp/800-57-part-1/rev-5/final>https://csrc.nist.gov/publications/detail/sp/800-57-part-1/rev-5/final</a></li><li>FIPS 140‑3 암호 모듈 보안 요구사항
<a href=https://csrc.nist.gov/publications/detail/fips/140/3/final>https://csrc.nist.gov/publications/detail/fips/140/3/final</a></li><li>AICPA SOC 2 안내
<a href=https://www.aicpa-cima.com/resources/article/what-is-soc-2>https://www.aicpa-cima.com/resources/article/what-is-soc-2</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://handsupmin.github.io/tags/cryptocurrency/>Cryptocurrency</a></li><li><a href=https://handsupmin.github.io/tags/wallet/>Wallet</a></li><li><a href=https://handsupmin.github.io/tags/security/>Security</a></li><li><a href=https://handsupmin.github.io/tags/blockchain/>Blockchain</a></li></ul><nav class=paginav><a class=prev href=https://handsupmin.github.io/posts/abstract-chain-overview-274b74/><span class=title>« Prev</span><br><span>Abstract 체인이란? zkRollup 기반 L2 체인 구조와 핵심 컴포넌트 정리</span>
</a><a class=next href=https://handsupmin.github.io/posts/blockchain-principles-mining-hash-274b74/><span class=title>Next »</span><br><span>블록체인이란? 블록체인 개념 총정리</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on x" href="https://x.com/intent/tweet/?text=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90&amp;url=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f&amp;hashtags=cryptocurrency%2cwallet%2csecurity%2cblockchain"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f&amp;title=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90&amp;summary=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90&amp;source=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f&title=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on whatsapp" href="https://api.whatsapp.com/send?text=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90%20-%20https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on telegram" href="https://telegram.me/share/url?text=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90&amp;url=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 커스토디얼 vs 논커스토디얼 월렛 비교 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20vs%20%eb%85%bc%ec%bb%a4%ec%8a%a4%ed%86%a0%eb%94%94%ec%96%bc%20%ec%9b%94%eb%a0%9b%20%eb%b9%84%ea%b5%90&u=https%3a%2f%2fhandsupmin.github.io%2fposts%2fcustodial-vs-noncustodial-wallets-274b74%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://handsupmin.github.io/>HandsLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>