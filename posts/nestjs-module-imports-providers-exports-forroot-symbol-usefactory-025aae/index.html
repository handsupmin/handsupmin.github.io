<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory | HandsLog</title>
<meta name=keywords content="nestjs,module,dependency-injection,factory-provider,dynamic-module,forroot,typescript"><meta name=description content="개요
NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임
핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임
Module의 imports, providers, exports
@Module 선언의 기본 형태
@Module({ imports: [...], providers: [...], exports: [...] })
class SomeModule {}
providers

이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록
@Injectable 클래스들 중심 Service, Repository, Adapter 등
예시



providers: [BatchService, PortFetcher, StoreService, MergeService]
imports

다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언
예시



imports: [RepositoryModule, HttpModule, LoggerModule]
exports

이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록
예시



exports: [JSON_REPOSITORY, LogRepository]정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임"><meta name=author content><link rel=canonical href=https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.jsontapose.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.jsontapose.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.jsontapose.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.jsontapose.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.jsontapose.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/json href=https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/index.json><link rel=alternate hreflang=en href=https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=module>
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

  const isDark = () =>
    document.body.classList.contains("dark") ||
    window.matchMedia?.("(prefers-color-scheme: dark)")?.matches;

  const getThemeOptions = () => {
    const dark = isDark();
    return {
      startOnLoad: false,
      securityLevel: "loose", 
      theme: dark ? "dark" : "default",
      themeVariables: dark
        ? {
            primaryColor: "#0f172a"  ,
            primaryTextColor: "#e5e7eb"  ,
            primaryBorderColor: "#94a3b8"  ,
            lineColor: "#94a3b8",
            textColor: "#e5e7eb",
            nodeTextColor: "#e5e7eb",
            edgeLabelBackground: "#0f172a",
          }
        : {
            primaryColor: "#f8fafc"  ,
            primaryTextColor: "#111827",
            primaryBorderColor: "#374151",
            lineColor: "#374151",
            textColor: "#111827",
            nodeTextColor: "#111827",
            edgeLabelBackground: "#ffffff",
          },
    };
  };

  const renderMermaid = () => {
    
    document.querySelectorAll(".mermaid[data-processed]").forEach((el) => {
      el.removeAttribute("data-processed");
    });
    mermaid.initialize(getThemeOptions());
    mermaid.run({ querySelector: ".mermaid" });
  };

  
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", renderMermaid, {
      once: true,
    });
  } else {
    renderMermaid();
  }

  
  const btn = document.getElementById("theme-toggle");
  if (btn) {
    btn.addEventListener("click", () => {
      
      setTimeout(renderMermaid, 0);
    });
  }

  
  const mql = window.matchMedia?.("(prefers-color-scheme: dark)");
  if (mql && mql.addEventListener) {
    mql.addEventListener("change", renderMermaid);
  }
</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NKJRT1NC1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6NKJRT1NC1")</script><meta name=google-adsense-account content="ca-pub-6022353980017733"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6022353980017733" crossorigin=anonymous></script><meta property="og:url" content="https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/"><meta property="og:site_name" content="HandsLog"><meta property="og:title" content="NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory"><meta property="og:description" content="개요 NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임 핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임
Module의 imports, providers, exports @Module 선언의 기본 형태
@Module({ imports: [...], providers: [...], exports: [...] }) class SomeModule {} providers 이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록 @Injectable 클래스들 중심 Service, Repository, Adapter 등 예시 providers: [BatchService, PortFetcher, StoreService, MergeService] imports 다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언 예시 imports: [RepositoryModule, HttpModule, LoggerModule] exports 이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록 예시 exports: [JSON_REPOSITORY, LogRepository]정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임"><meta property="og:locale" content="ko-kr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-11T13:10:56+00:00"><meta property="article:modified_time" content="2026-01-11T13:10:56+00:00"><meta property="article:tag" content="Nestjs"><meta property="article:tag" content="Module"><meta property="article:tag" content="Dependency-Injection"><meta property="article:tag" content="Factory-Provider"><meta property="article:tag" content="Dynamic-Module"><meta property="article:tag" content="Forroot"><meta name=twitter:card content="summary"><meta name=twitter:title content="NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory"><meta name=twitter:description content="개요
NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임
핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임
Module의 imports, providers, exports
@Module 선언의 기본 형태
@Module({ imports: [...], providers: [...], exports: [...] })
class SomeModule {}
providers

이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록
@Injectable 클래스들 중심 Service, Repository, Adapter 등
예시



providers: [BatchService, PortFetcher, StoreService, MergeService]
imports

다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언
예시



imports: [RepositoryModule, HttpModule, LoggerModule]
exports

이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록
예시



exports: [JSON_REPOSITORY, LogRepository]정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.jsontapose.com/posts/"},{"@type":"ListItem","position":2,"name":"NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory","item":"https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory","name":"NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory","description":"개요 NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임 핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임\nModule의 imports, providers, exports @Module 선언의 기본 형태\n@Module({ imports: [...], providers: [...], exports: [...] }) class SomeModule {} providers 이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록 @Injectable 클래스들 중심 Service, Repository, Adapter 등 예시 providers: [BatchService, PortFetcher, StoreService, MergeService] imports 다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언 예시 imports: [RepositoryModule, HttpModule, LoggerModule] exports 이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록 예시 exports: [JSON_REPOSITORY, LogRepository]정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임\n","keywords":["nestjs","module","dependency-injection","factory-provider","dynamic-module","forroot","typescript"],"articleBody":"개요 NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임 핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임\nModule의 imports, providers, exports @Module 선언의 기본 형태\n@Module({ imports: [...], providers: [...], exports: [...] }) class SomeModule {} providers 이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록 @Injectable 클래스들 중심 Service, Repository, Adapter 등 예시 providers: [BatchService, PortFetcher, StoreService, MergeService] imports 다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언 예시 imports: [RepositoryModule, HttpModule, LoggerModule] exports 이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록 예시 exports: [JSON_REPOSITORY, LogRepository]정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임\nScheduleModule.forRoot와 forRoot 패턴 ScheduleModule은 크론과 인터벌 같은 스케줄링 기능을 제공하는 외부 모듈임\nforRoot는 전역 설정을 포함한 DynamicModule을 반환하는 정적 메서드 패턴 앱 부트스트랩 시 한 번 호출해 필요한 레지스트리와 provider를 구성하는 용도 유사 패턴 예시 TypeOrmModule.forRoot, ConfigModule.forRoot 등 의미상 forRoot는 앱 레벨에서 한 번 설정하고 재사용하는 초기화 진입점 역할임\nSymbol 토큰으로 DI 안정화 Nest DI는 토큰 기반 주입 동작 기본은 클래스가 토큰이지만 클래스가 아닌 값 또는 여러 구현을 구분해야 할 때 커스텀 토큰 필요\nexport const JSON_REPOSITORY = Symbol('JSON_REPOSITORY') Symbol은 전역에서 유일한 값이라 이름 충돌 회피에 유리 provider 등록 시 커스텀 토큰과 매핑 { provide: JSON_REPOSITORY, useFactory: () =\u003e /* 인스턴스 반환 */ } 주입 시 @Inject(JSON_REPOSITORY)로 명시적 의존성 선택 가능 constructor(@Inject(JSON_REPOSITORY) private readonly repo: JsonRepository\u003cany\u003e) {}클래스명으로는 구분이 어려운 경우 또는 인터페이스에 해당하는 구현을 주입해야 할 때 유효한 패턴임\nuseFactory를 쓰는 이유 기본 등록은 useClass 동작과 동일해 new SomeService(…)로 생성됨 생성 과정이 비동기이거나 외부 설정 주입, 사전 로딩이 필요한 경우 useFactory가 적합\n요구 사항 예시 생성 자체가 async로 초기 데이터 로딩 필요 외부 라이브러리 설정값 주입 필요 완성된 인스턴스를 싱글톤으로 공유 필요 간단 예시\n{ provide: JSON_REPOSITORY, useFactory: async () =\u003e { const db = new JsonDB(new Config('path', true)) await db.load() return JsonRepository.create(db) }, }포인트\nuseFactory 결과값이 토큰에 매핑되어 DI 대상이 됨 의존성이 있다면 inject 옵션으로 다른 provider를 안전하게 받아서 사용 권장 new로 직접 만드는 대신 주입 사용 권장 요약 imports 외부 모듈이 export한 provider 사용 선언 providers 이 모듈에서 생성해 등록하는 의존성 목록 exports 외부에서도 사용 가능하도록 공개할 provider 지정 forRoot 전역 설정을 수반하는 DynamicModule 초기화 패턴, 앱 부트스트랩에서 한 번 호출하는 용도 Symbol 토큰 클래스 이외의 토큰이 필요할 때 충돌 없는 식별자 제공, 다중 구현 구분에 유리 useFactory 비동기 초기화나 복잡한 생성 로직을 함수로 캡슐화해 주입, 설정 주입과 싱글톤 공유 시 적합 참고자료 https://docs.nestjs.com/modules https://docs.nestjs.com/fundamentals/custom-providers https://docs.nestjs.com/fundamentals/dynamic-modules https://docs.nestjs.com/techniques/task-scheduling ","wordCount":"400","inLanguage":"en","datePublished":"2026-01-11T13:10:56.066Z","dateModified":"2026-01-11T13:10:56.066Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.jsontapose.com/posts/nestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae/"},"publisher":{"@type":"Organization","name":"HandsLog","logo":{"@type":"ImageObject","url":"https://blog.jsontapose.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.jsontapose.com/ accesskey=h title="HandsLog (Alt + H)">HandsLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.jsontapose.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://blog.jsontapose.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://jsontapose.com/ title="compare JSON"><span>compare JSON</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.jsontapose.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.jsontapose.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory</h1><div class=post-meta><span title='2026-01-11 13:10:56.066 +0000 UTC'>January 11, 2026</span></div></header><div class=post-content><h3 id=개요>개요<a hidden class=anchor aria-hidden=true href=#개요>#</a></h3><p>NestJS에서 @Module은 기능 단위 의존성을 묶는 단위이자 DI 경계를 정의하는 컨테이너 개념임
핵심은 imports로 외부 의존성 수입, providers로 내부 의존성 등록, exports로 외부 공개 대상을 결정하는 흐름 이해가 전부임</p><h3 id=module의-imports-providers-exports>Module의 imports, providers, exports<a hidden class=anchor aria-hidden=true href=#module의-imports-providers-exports>#</a></h3><p>@Module 선언의 기본 형태</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>@Module</span><span style=color:#eceff4>({</span> imports<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[...],</span> providers<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[...],</span> exports<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[...]</span> <span style=color:#eceff4>})</span>
</span></span><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>class</span> SomeModule <span style=color:#eceff4>{}</span></span></span></code></pre></div><ul><li>providers<ul><li>이 모듈에서 새로 생성해 DI 컨테이너에 등록할 대상 목록</li><li>@Injectable 클래스들 중심 Service, Repository, Adapter 등</li><li>예시</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>providers<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[</span>BatchService<span style=color:#eceff4>,</span> PortFetcher<span style=color:#eceff4>,</span> StoreService<span style=color:#eceff4>,</span> MergeService<span style=color:#eceff4>]</span></span></span></code></pre></div><ul><li>imports<ul><li>다른 모듈이 exports로 공개한 provider를 이 모듈에서 사용하겠다는 선언</li><li>예시</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>imports<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[</span>RepositoryModule<span style=color:#eceff4>,</span> HttpModule<span style=color:#eceff4>,</span> LoggerModule<span style=color:#eceff4>]</span></span></span></code></pre></div><ul><li>exports<ul><li>이 모듈 바깥에서도 사용 가능하도록 내보낼 provider 목록</li><li>예시</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span>exports<span style=color:#81a1c1>:</span> <span style=color:#eceff4>[</span>JSON_REPOSITORY<span style=color:#eceff4>,</span> LogRepository<span style=color:#eceff4>]</span></span></span></code></pre></div><p>정리하면 providers는 내부 생성, imports는 외부 수입, exports는 외부 공개 대상 지정임</p><h3 id=schedulemoduleforroot와-forroot-패턴>ScheduleModule.forRoot와 forRoot 패턴<a hidden class=anchor aria-hidden=true href=#schedulemoduleforroot와-forroot-패턴>#</a></h3><p>ScheduleModule은 크론과 인터벌 같은 스케줄링 기능을 제공하는 외부 모듈임</p><ul><li>forRoot는 전역 설정을 포함한 DynamicModule을 반환하는 정적 메서드 패턴</li><li>앱 부트스트랩 시 한 번 호출해 필요한 레지스트리와 provider를 구성하는 용도</li><li>유사 패턴 예시 TypeOrmModule.forRoot, ConfigModule.forRoot 등</li></ul><p>의미상 forRoot는 앱 레벨에서 한 번 설정하고 재사용하는 초기화 진입점 역할임</p><h3 id=symbol-토큰으로-di-안정화>Symbol 토큰으로 DI 안정화<a hidden class=anchor aria-hidden=true href=#symbol-토큰으로-di-안정화>#</a></h3><p>Nest DI는 토큰 기반 주입 동작
기본은 클래스가 토큰이지만 클래스가 아닌 값 또는 여러 구현을 구분해야 할 때 커스텀 토큰 필요</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>export</span> <span style=color:#81a1c1;font-weight:700>const</span> JSON_REPOSITORY <span style=color:#81a1c1>=</span> Symbol<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#39;JSON_REPOSITORY&#39;</span><span style=color:#eceff4>)</span></span></span></code></pre></div><ul><li>Symbol은 전역에서 유일한 값이라 이름 충돌 회피에 유리</li><li>provider 등록 시 커스텀 토큰과 매핑</li></ul><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#eceff4>{</span> provide: <span style=color:#81a1c1>JSON_REPOSITORY</span><span style=color:#eceff4>,</span> useFactory<span style=color:#81a1c1>:</span> <span style=color:#eceff4>()</span> <span style=color:#81a1c1>=&gt;</span> <span style=color:#616e87;font-style:italic>/* 인스턴스 반환 */</span> <span style=color:#eceff4>}</span></span></span></code></pre></div><ul><li>주입 시 @Inject(JSON_REPOSITORY)로 명시적 의존성 선택 가능</li></ul><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#81a1c1;font-weight:700>constructor</span><span style=color:#eceff4>(</span><span style=color:#81a1c1;font-weight:700>@Inject</span><span style=color:#eceff4>(</span>JSON_REPOSITORY<span style=color:#eceff4>)</span> <span style=color:#81a1c1;font-weight:700>private</span> <span style=color:#81a1c1;font-weight:700>readonly</span> repo: <span style=color:#81a1c1>JsonRepository</span><span style=color:#eceff4>&lt;</span><span style=color:#81a1c1>any</span><span style=color:#eceff4>&gt;)</span> <span style=color:#eceff4>{}</span></span></span></code></pre></div><p>클래스명으로는 구분이 어려운 경우 또는 인터페이스에 해당하는 구현을 주입해야 할 때 유효한 패턴임</p><h3 id=usefactory를-쓰는-이유>useFactory를 쓰는 이유<a hidden class=anchor aria-hidden=true href=#usefactory를-쓰는-이유>#</a></h3><p>기본 등록은 useClass 동작과 동일해 new SomeService(&mldr;)로 생성됨
생성 과정이 비동기이거나 외부 설정 주입, 사전 로딩이 필요한 경우 useFactory가 적합</p><ul><li>요구 사항 예시<ul><li>생성 자체가 async로 초기 데이터 로딩 필요</li><li>외부 라이브러리 설정값 주입 필요</li><li>완성된 인스턴스를 싱글톤으로 공유 필요</li></ul></li></ul><p>간단 예시</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>  provide: <span style=color:#81a1c1>JSON_REPOSITORY</span><span style=color:#eceff4>,</span>
</span></span><span style=display:flex><span>  useFactory: <span style=color:#81a1c1>async</span> <span style=color:#eceff4>()</span> <span style=color:#81a1c1>=&gt;</span> <span style=color:#eceff4>{</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>const</span> db <span style=color:#81a1c1>=</span> <span style=color:#81a1c1;font-weight:700>new</span> JsonDB<span style=color:#eceff4>(</span><span style=color:#81a1c1;font-weight:700>new</span> Config<span style=color:#eceff4>(</span><span style=color:#a3be8c>&#39;path&#39;</span><span style=color:#eceff4>,</span> <span style=color:#81a1c1;font-weight:700>true</span><span style=color:#eceff4>))</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>await</span> db<span style=color:#eceff4>.</span>load<span style=color:#eceff4>()</span>
</span></span><span style=display:flex><span>    <span style=color:#81a1c1;font-weight:700>return</span> JsonRepository<span style=color:#eceff4>.</span>create<span style=color:#eceff4>(</span>db<span style=color:#eceff4>)</span>
</span></span><span style=display:flex><span>  <span style=color:#eceff4>},</span>
</span></span><span style=display:flex><span><span style=color:#eceff4>}</span></span></span></code></pre></div><p>포인트</p><ul><li>useFactory 결과값이 토큰에 매핑되어 DI 대상이 됨</li><li>의존성이 있다면 inject 옵션으로 다른 provider를 안전하게 받아서 사용 권장 new로 직접 만드는 대신 주입 사용 권장</li></ul><h3 id=요약>요약<a hidden class=anchor aria-hidden=true href=#요약>#</a></h3><ul><li>imports 외부 모듈이 export한 provider 사용 선언</li><li>providers 이 모듈에서 생성해 등록하는 의존성 목록</li><li>exports 외부에서도 사용 가능하도록 공개할 provider 지정</li><li>forRoot 전역 설정을 수반하는 DynamicModule 초기화 패턴, 앱 부트스트랩에서 한 번 호출하는 용도</li><li>Symbol 토큰 클래스 이외의 토큰이 필요할 때 충돌 없는 식별자 제공, 다중 구현 구분에 유리</li><li>useFactory 비동기 초기화나 복잡한 생성 로직을 함수로 캡슐화해 주입, 설정 주입과 싱글톤 공유 시 적합</li></ul><h3 id=참고자료>참고자료<a hidden class=anchor aria-hidden=true href=#참고자료>#</a></h3><ul><li><a href=https://docs.nestjs.com/modules>https://docs.nestjs.com/modules</a></li><li><a href=https://docs.nestjs.com/fundamentals/custom-providers>https://docs.nestjs.com/fundamentals/custom-providers</a></li><li><a href=https://docs.nestjs.com/fundamentals/dynamic-modules>https://docs.nestjs.com/fundamentals/dynamic-modules</a></li><li><a href=https://docs.nestjs.com/techniques/task-scheduling>https://docs.nestjs.com/techniques/task-scheduling</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.jsontapose.com/tags/nestjs/>Nestjs</a></li><li><a href=https://blog.jsontapose.com/tags/module/>Module</a></li><li><a href=https://blog.jsontapose.com/tags/dependency-injection/>Dependency-Injection</a></li><li><a href=https://blog.jsontapose.com/tags/factory-provider/>Factory-Provider</a></li><li><a href=https://blog.jsontapose.com/tags/dynamic-module/>Dynamic-Module</a></li><li><a href=https://blog.jsontapose.com/tags/forroot/>Forroot</a></li><li><a href=https://blog.jsontapose.com/tags/typescript/>Typescript</a></li></ul><nav class=paginav><a class=prev href=https://blog.jsontapose.com/posts/merkle-tree-blockchain-role-274b74/><span class=title>« Prev</span><br><span>머클트리(Merkle Tree)란? 머클트리의 개념과 블록체인에서의 역할</span>
</a><a class=next href=https://blog.jsontapose.com/posts/javascript-async-iterators-waiting-concurrency-backpressure-e200bd/><span class=title>Next »</span><br><span>자바스크립트 비동기와 이터레이터 정리 — 기다림, 동시성, 백프레셔</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on x" href="https://x.com/intent/tweet/?text=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory&amp;url=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f&amp;hashtags=nestjs%2cmodule%2cdependency-injection%2cfactory-provider%2cdynamic-module%2cforroot%2ctypescript"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f&amp;title=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory&amp;summary=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory&amp;source=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f&title=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on whatsapp" href="https://api.whatsapp.com/send?text=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory%20-%20https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on telegram" href="https://telegram.me/share/url?text=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory&amp;url=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share NestJS @Module 핵심 정리: imports, providers, exports, forRoot, Symbol 토큰, useFactory on ycombinator" href="https://news.ycombinator.com/submitlink?t=NestJS%20%40Module%20%ed%95%b5%ec%8b%ac%20%ec%a0%95%eb%a6%ac%3a%20imports%2c%20providers%2c%20exports%2c%20forRoot%2c%20Symbol%20%ed%86%a0%ed%81%b0%2c%20useFactory&u=https%3a%2f%2fblog.jsontapose.com%2fposts%2fnestjs-module-imports-providers-exports-forroot-symbol-usefactory-025aae%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://blog.jsontapose.com/>HandsLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>