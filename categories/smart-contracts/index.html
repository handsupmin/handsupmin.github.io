<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Smart-Contracts | HandsLog</title>
<meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://handsupmin.github.io/categories/smart-contracts/><link crossorigin=anonymous href=/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as=style><link rel=icon href=https://handsupmin.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://handsupmin.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://handsupmin.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://handsupmin.github.io/apple-touch-icon.png><link rel=mask-icon href=https://handsupmin.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://handsupmin.github.io/categories/smart-contracts/index.xml><link rel=alternate hreflang=en href=https://handsupmin.github.io/categories/smart-contracts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://handsupmin.github.io/categories/smart-contracts/"><meta property="og:site_name" content="HandsLog"><meta property="og:title" content="Smart-Contracts"><meta property="og:locale" content="ko-kr"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Smart-Contracts"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://handsupmin.github.io/ accesskey=h title="HandsLog (Alt + H)">HandsLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Smart-Contracts</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>스마트 컨트랙트에서 O(n)을 피하고 O(1)을 지향해야 하는 이유와 실무 대처법</h2></header><div class=entry-content><p>개요 스마트 컨트랙트 구현에서 반복문으로 인한 O(n) 연산은 단순한 성능 문제를 넘어 서비스 가용성에 직결되는 문제를 유발함. 블록 가스 한도와 트랜잭션 가스 비용 구조 때문에 선형 탐색이나 무제한 반복은 결국 특정 상태에서 함수가 더 이상 실행되지 못하는 상황(Exceeds block gas limit)으로 이어질 수 있음. 이유와 개선 방법, 실무에서 고려할 포인트를 정리함.
문제 정의와 영향 상태 검증을 위해 배열을 전수 탐색하는 구현 사례. 예: 사용자 등록 시 users 배열을 처음부터 끝까지 비교하여 중복 체크하는 방식 문제점 요약: 가스 비용이 가입자 수에 비례해 증가. 블록 가스 한도를 넘기면 해당 함수 호출 불가. 서비스 정상성 저하 및 DoS 위험 정량적 예시: 개별 비교에 일정 가스가 소모되고 가입자 수가 수만 명대가 되면 단일 트랜잭션으로 처리 불가 핵심 개념과 대안 매핑(mapping)을 이용한 존재 여부 체크. 키-값 해시 조회 특성으로 조회/삽입/삭제 모두 O(1) mapping(address => bool) public users; function register(address user) public { require(!users[user], "already registered"); users[user] = true; } 장점: 존재 여부 확인 비용 고정. 단점: 전체 열거 불가(온체인 인덱스 조회 불가)
...</p></div><footer class=entry-footer><span title='2025-09-21 13:05:50.555 +0000 UTC'>September 21, 2025</span></footer><a class=entry-link aria-label="post link to 스마트 컨트랙트에서 O(n)을 피하고 O(1)을 지향해야 하는 이유와 실무 대처법" href=https://handsupmin.github.io/posts/why-avoid-o-n-in-smart-contracts-aim-for-o1-274b74/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>오프체인 서명 검증 페이마스터 (in ZkSync Era)</h2></header><div class=entry-content><p>주의
아래는 “핵심 동작만 이해할 수 있는” 부분 스니펫과 설명임. 실제 배포 전에는 보안 리뷰·테스트 필수. 개요 오프체인에서 생성한 EIP‑712 서명을 온체인에서 검증해 가스비 대납(paymaster) 을 구현함. 메타트랜잭션·가스리스 UX 제공 목적. ZkSync Era 환경 기준으로 컨트랙트/서버/클라이언트 최소 구성과 운영·보안 포인트를 정리함.
문제 정의 & 설계 의도 내가 당면한 문제 가스비 대납 필요함 제한된 대상만 사용 가능해야 함 (우리 서비스 내에서만 사용 가능해야함) 가스 낭비/잔고 소진 리스크 최소화해야 함 (악용·오구성·스팸 대비) 단순 대안(toAddressPaymaster)에서 드러난 한계 신규 유저 온보딩 흐름과 충돌
...</p></div><footer class=entry-footer><span title='2025-09-21 02:14:08.087 +0000 UTC'>September 21, 2025</span></footer><a class=entry-link aria-label="post link to 오프체인 서명 검증 페이마스터 (in ZkSync Era)" href=https://handsupmin.github.io/posts/zksync-era-paymaster-off-chain-signature-verification-274b74/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://handsupmin.github.io/>HandsLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>